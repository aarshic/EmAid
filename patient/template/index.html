<!DOCTYPE html>
<html>
	<head>
		<title>EmAid</title>
		<meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1, user-scalable=no">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css" integrity="sha384-9gVQ4dYFwwWSjIDZnLEWnxCjeSWFphJiwGPXr1jddIhOegiu1FwO5qRGvFXOdJZ4" crossorigin="anonymous">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/malihu-custom-scrollbar-plugin/3.1.5/jquery.mCustomScrollbar.min.css">
        <script defer src="https://use.fontawesome.com/releases/v5.0.13/js/solid.js" integrity="sha384-tzzSw1/Vo+0N5UhStP3bvwWPq+uvzCMfrN1fEFe+xBmv1C/AtVX5K0uZtmcHitFZ" crossorigin="anonymous"></script>
		<script defer src="https://use.fontawesome.com/releases/v5.0.13/js/fontawesome.js" integrity="sha384-6OIrr52G08NpOFSZdxxz1xdNSndlD4vdcf/q2myIUVO0VsqaGHJsB0RaBE01VTOY" crossorigin="anonymous"></script>
		<!-- <script src="https://maps.googleapis.com/maps/api/js?sensor=false"></script> -->
		
		
		<script src='https://api.mapbox.com/mapbox-gl-js/v1.4.1/mapbox-gl.js'></script>
		<link href='https://api.mapbox.com/mapbox-gl-js/v1.4.1/mapbox-gl.css' rel='stylesheet' />


		<link rel="stylesheet" type="text/css" href="https://js.api.here.com/v3/3.1/mapsjs-ui.css" />
		<link rel="stylesheet" type="text/css" href="demo.css" />
		<link rel="stylesheet" type="text/css" href="styles.css" />
		<link rel="stylesheet" type="text/css" href="../template.css" />
		<script type="text/javascript" src='../test-credentials.js'></script>    
		<script type="text/javascript" src="https://js.api.here.com/v3/3.1/mapsjs-core.js"></script>
		<script type="text/javascript" src="https://js.api.here.com/v3/3.1/mapsjs-service.js"></script>
		<script type="text/javascript" src="https://js.api.here.com/v3/3.1/mapsjs-ui.js"></script>
		<script type="text/javascript" src="https://js.api.here.com/v3/3.1/mapsjs-mapevents.js"></script>

		<script src='https://api.tiles.mapbox.com/mapbox-gl-js/v1.5.0/mapbox-gl.js'></script>
		<link href='https://api.tiles.mapbox.com/mapbox-gl-js/v1.5.0/mapbox-gl.css' rel='stylesheet' />

		<style>
			@import "https://fonts.googleapis.com/css?family=Poppins:300,400,500,600,700";
			body {
				font-family: 'Poppins', sans-serif;
				background: #fafafa;
			}
			.wrapper{
				position: fixed;
				z-index: 100;
			}
			p {
				font-family: 'Poppins', sans-serif;
				font-size: 1.1em;
				font-weight: 300;
				line-height: 1.7em;
			}
			a, a:hover, a:focus {
				color: inherit;
				text-decoration: none;
				transition: all 0.3s;
			}
			.navbar {
				padding: 15px 10px;
				background: #fff;
				border: none;
				border-radius: 0;
				margin-bottom: 40px;
				box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
			}
			.navbar-btn {
				box-shadow: none;
				outline: none !important;
				border: none;
			}
			.line {
				width: 100%;
				height: 1px;
				border-bottom: 1px dashed #ddd;
				margin: 40px 0;
			}
			#sidebar {
				width: 160px;
				position: fixed;
				top: 0;
				left: -250px;
				height: 100vh;
				z-index: 999;
				background: black;
				color: #fff;
				transition: all 0.3s;
				overflow-y: scroll;
				box-shadow: 3px 3px 3px rgba(0, 0, 0, 0.2);
			}
			#sidebar.active {
				left: 0;
			}
			#dismiss {
				width: 35px;
				height: 35px;
				line-height: 35px;
				text-align: center;
				background:black;
				position: absolute;
				top: 10px;
				right: 10px;
				cursor: pointer;
				-webkit-transition: all 0.3s;
				-o-transition: all 0.3s;
				transition: all 0.3s;
			}
			#dismiss:hover {
				background: #fff;
				color: black;
			}
			.overlay {
				display: none;
				width: 100vw;
				height: 100vh;
				background: rgba(0, 0, 0, 0.3);
				z-index: 998;
				opacity: 0;
				transition: all 0.5s ease-in-out;
				position: absolute;
				top: 0;
				right: 0;
			}
			.overlay.active {
				display: block;
				opacity: 1;
			}
			#sidebar .sidebar-header {
				padding: 20px;
				background: black;
			}
			#sidebar ul.components {
				padding: 20px 0;
				border-bottom: 1px solid black;
			}
			#sidebar ul p {
				color: #fff;
				padding: 10px;
			}
			#sidebar ul li a {
				padding: 10px;
				font-size: 1.1em;
				display: block;
			}
			#sidebar ul li a:hover {
				color: black;
				background: #fff;
			}
			#sidebar ul li.active>a, a[aria-expanded="true"] {
				color: #fff;
				background: black;
			}
			a[data-toggle="collapse"] {
				position: relative;
			}
			.dropdown-toggle::after {
				display: block;
				position: absolute;
				top: 50%;
				right: 20px;
				transform: translateY(-50%);
			}
			ul ul a {
				font-size: 0.9em !important;
				padding-left: 30px !important;
				background: black;
			}
			ul.CTAs {
				padding: 20px;
			}
			ul.CTAs a {
				text-align: center;
				font-size: 0.9em !important;
				display: block;
				border-radius: 5px;
				margin-bottom: 5px;
			}
			a.download {
				background: #fff;
				color: black;
			}
			a.article, a.article:hover {
				background: black !important;
				color: #fff !important;
			}
			#content {
				width: 100%;
				padding: 20px;
				min-height: 100vh;
				transition: all 0.3s;
			}
			.wrapper{
				margin: 10px;
				padding: 5px 10px 5px 20px;
			}
			.container {
				margin-top: 20px;
			}
			.container {
				display: inline-block;
				cursor: pointer;
			}
			#map {
				position:absolute; 
				top:0; 
				bottom:0; 
				width:100%; 
			}
			.image-cropper{
				padding-top: 5%;
				/* max-width: 400px; */
				width: 600%;
				height: auto;
				overflow: hidden;
			}

			.image-cropper img{
				margin: 0 auto;
				height: auto;
				width: 60%;
				margin: 0 0 0 20%;
				-webkit-border-radius: 50%;
				-moz-border-radius: 50%;
				-ms-border-radius: 50%;
				-o-border-radius: 50%;
				border-radius: 200%;
			}
			.book{
				background-color:white; 
				position: fixed; 
				z-index: 100; 
				width: 100%;
				margin: 165% 0% 0% 0%;
				align-content: center;
				align-self: center;
				align-items: center;
				text-align: center;
				background-color: black;
				color: white;
			}
			.log {
				position: absolute;
				top: 5px;
				left: 5px;
				height: 150px;
				width: 250px;
				overflow: scroll;
				background: white;
				margin: 0;
				padding: 0;
				list-style: none;
				font-size: 12px;
			}
			.log-entry {
				padding: 5px;
				border-bottom: 1px solid #d0d9e9;
			}
			.log-entry:nth-child(odd) {
				background-color: #e1e7f1;
			}
			.coordinates {
				background: rgba(0,0,0,0.5);
				color: #fff;
				position: absolute;
				bottom: 40px;
				left: 10px;
				padding:5px 10px;
				margin: 0;
				font-size: 11px;
				line-height: 18px;
				border-radius: 3px;
				display: none;
			}
		</style>
	</head>
    <body>
		<!-- Sidebar -->
		<div class="wrapper">
			<nav id="sidebar">
				<div id="dismiss">
					<i class="fas fa-arrow-left"></i>
				</div>

				<div class="sidebar-header">
					
				</div>

				<div class="nav flex-column nav-pills" id="v-pills-tab" role="tablist" aria-orientation="vertical">
						<div class="image-cropper" >
                                <img src="" alt="Photo" style="float:right;">
                        </div>
					<center><p style="color: white;">User</p></center>
					<a class="nav-link" id="v-pills-settings-tab" data-toggle="pill" href="#trips" role="tab" aria-controls="v-pills-settings" aria-selected="false">Your Trips</a>
					<a class="nav-link" id="v-pills-profile-tab" data-toggle="pill" href="#about" role="tab" aria-controls="v-pills-profile" aria-selected="false">Help</a>
					<a class="nav-link" id="v-pills-messages-tab" data-toggle="pill" href="#pages" role="tab" aria-controls="v-pills-messages" aria-selected="false">Settings</a>
					<a class="nav-link" id="v-pills-settings-tab" data-toggle="pill" href="#contacts" role="tab" aria-controls="v-pills-settings" aria-selected="false">Logout</a>
					
				</div>
			</nav>
			<button type="button" id="sidebarCollapse" class="btn btn-info" style="background-color:white;">
				<i class="fa fa-bars" style="color: black;"></i>
			</button>
		</div>
		<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
		<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/malihu-custom-scrollbar-plugin/3.1.5/jquery.mCustomScrollbar.concat.min.js"></script>
		<script>
			$('.sidebar').modal('show');
			$(document).ready(function() {
				$("#sidebar").mCustomScrollbar({
					theme: "minimal"
				});
				$('#dismiss, .overlay').on('click', function() {
					$('#sidebar').removeClass('active');
					$('.overlay').removeClass('active');
				});
				$('#sidebarCollapse').on('click', function() {
					$('#sidebar').addClass('active');
					$('.overlay').addClass('active');
					$('.collapse.in').toggleClass('in');
					$('a[aria-expanded=true]').attr('aria-expanded', 'false');
				});
				$('div.nav-pills a.nav-link').on('click', function(){
					$('#sidebar').removeClass('active');
					$('.overlay').removeClass('active');
				})
			});
		</script>
		<!-- <div id='map' style='width: 400px; height: 300px;'></div>
		<script>
			mapboxgl.accessToken = 'pk.eyJ1IjoiYWFyc2hpY2giLCJhIjoiY2sycnYyOW5hMHJsNzNpcWJudnJzYW8xaiJ9.8ABp1hlgXDQB8_PbJdZh3A';
			var map = new mapboxgl.Map({
				container: 'map',
				style: 'mapbox://styles/mapbox/streets-v11'
			});
		</script> -->




		<div id='map'></div>
		<script>
			mapboxgl.accessToken = 'pk.eyJ1IjoiYWFyc2hpY2giLCJhIjoiY2sycnYyOW5hMHJsNzNpcWJudnJzYW8xaiJ9.8ABp1hlgXDQB8_PbJdZh3A';
				var map = new mapboxgl.Map({
				container: 'map', // container id
				style: 'mapbox://styles/mapbox/streets-v11',
				center: [-96, 37.8], // starting position
				zoom: 3 // starting zoom
			});

			// Add geolocate control to the map.
			map.addControl(new mapboxgl.GeolocateControl({
				positionOptions: {
					enableHighAccuracy: true
				},
				trackUserLocation: true
			}));
		</script>

		<button type="button" class="book" onclick="findNearestMarker(map.center)">
			<p>Book Ambulance</p>
		</button>
		












		<div id="markers-on-the-map">
			<div id="map"></div>
			<script type="text/javascript" src='demo.js'></script>
			<script>
				
				function findNearestMarker(coords) {
				var minDist = 1000,
					nearest_text = '*None*',
					markerDist,
					// get all objects added to the map
					objects = map.getObjects(),
					len = map.getObjects().length,
					i;

				// iterate over objects and calculate distance between them
				for (i = 0; i < len; i += 1) {
					markerDist = objects[i].getGeometry().distance(coords);
					if (markerDist < minDist) {
					minDist = markerDist;
					nearest_text = objects[i].getData();
					}
				}

				logEvent('The nearest marker is: ' + nearest_text);
				}

				function addClickEventListenerToMap(map) {
				// add 'tap' listener
				map.addEventListener('tap', function (evt) {
					var coords =  map.screenToGeo(evt.currentPointer.viewportX, evt.currentPointer.viewportY);
					findNearestMarker(coords);
				}, false);
				}

				/**
				 * Boilerplate map initialization code starts below:
				 */

				//Step 1: initialize communication with the platform
				// In your own code, replace variable window.apikey with your own apikey
				var platform = new H.service.Platform({
				apikey: window.apikey
				});
				var defaultLayers = platform.createDefaultLayers();

				//Step 2: initialize a map
				var map = new H.Map(document.getElementById('map'),
				defaultLayers.vector.normal.map,{
				center: {lat: 60.1697, lng:24.8292},
				zoom: 16,
				pixelRatio: window.devicePixelRatio || 1
				});
				// add a resize listener to make sure that the map occupies the whole container
				window.addEventListener('resize', () => map.getViewPort().resize());

				//Step 3: make the map interactive
				// MapEvents enables the event system
				// Behavior implements default interactions for pan/zoom (also on mobile touch environments)
				var behavior = new H.mapevents.Behavior(new H.mapevents.MapEvents(map));

				// Step 4: create custom logging facilities
				var logContainer = document.createElement('ul');
				logContainer.className ='log';
				logContainer.innerHTML = '<li class="log-entry">Try clicking on the map</li>';
				map.getElement().appendChild(logContainer);

				// Helper for logging events
				function logEvent(str) {
				var entry = document.createElement('li');
				entry.className = 'log-entry';
				entry.textContent = str;
				logContainer.insertBefore(entry, logContainer.firstChild);
				}

				// Set up five markers.
				var coords = [{ lat:12.95851335, lng:77.64901060403906},
				{ lat: 12.9634429, lng: 77.6382454 },
				{ lat: 12.9362306, lng: 77.6254307 },
				{ lat: 12.971926, lng: 77.5963001 },
				{ lat:12.9493905, lng: 77.64373952631189}];

				//Create the svg mark-up
				var svgMarkup = '<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg">' +
					'<rect stroke="white" fill="#1b468d" x="1" y="1" width="22" height="22" />' +
					'<text x="12" y="18" font-size="12pt" font-family="Arial" font-weight="bold" ' +
					'text-anchor="middle" fill="white">${REPLACE}</text></svg>';

				coords.forEach(function (value, index) {
				var myIcon = new H.map.Icon(svgMarkup.replace('${REPLACE}', index + 1)),
				marker = new H.map.Marker(value,  {
					icon: myIcon,
					volatility: true
				});
				// add custom data to the marker
				marker.setData(index + 1);

				// set draggable attribute on the marker so it can recieve drag events
				marker.draggable = true;
				map.addObject(marker);
				});


				// simple D'n"D implementation for markers"'
				map.addEventListener('dragstart', function(ev) {
				var target = ev.target;
				if (target instanceof H.map.Marker) {
					behavior.disable();
				}
				}, false);

				map.addEventListener('drag', function(ev) {
				var target = ev.target,
					pointer = ev.currentPointer;
				if (target instanceof H.map.Marker) {
					target.setGeometry(map.screenToGeo(pointer.viewportX, pointer.viewportY));
				}
				}, false);

				map.addEventListener('dragend', function(ev) {
				var target = ev.target;
				if (target instanceof H.map.Marker) {
					behavior.enable();
				}
				}, false);

				// Add the click event listener.
				addClickEventListenerToMap(map);



			</script>
		</div>






		<!-- <div id='map'></div>
<script>
mapboxgl.accessToken = 'pk.eyJ1IjoiYWFyc2hpY2giLCJhIjoiY2sycnYyOW5hMHJsNzNpcWJudnJzYW8xaiJ9.8ABp1hlgXDQB8_PbJdZh3A';
var map = new mapboxgl.Map({
container: 'map',
style: 'mapbox://styles/mapbox/streets-v11',
center: [-122.486052, 37.830348],
zoom: 15
});
 
map.on('load', function () {
 
map.addLayer({
"id": "route",
"type": "line",
"source": {
"type": "geojson",
"data": {
"type": "Feature",
"properties": {},
"geometry": {
"type": "LineString",
"coordinates": [
[-122.48369693756104, 37.83381888486939],
[-122.48348236083984, 37.83317489144141],
[-122.48339653015138, 37.83270036637107],
[-122.48356819152832, 37.832056363179625],
[-122.48404026031496, 37.83114119107971],
[-122.48404026031496, 37.83049717427869],
[-122.48348236083984, 37.829920943955045],
[-122.48356819152832, 37.82954808664175],
[-122.48507022857666, 37.82944639795659],
[-122.48610019683838, 37.82880236636284],
[-122.48695850372314, 37.82931081282506],
[-122.48700141906738, 37.83080223556934],
[-122.48751640319824, 37.83168351665737],
[-122.48803138732912, 37.832158048267786],
[-122.48888969421387, 37.83297152392784],
[-122.48987674713133, 37.83263257682617],
[-122.49043464660643, 37.832937629287755],
[-122.49125003814696, 37.832429207817725],
[-122.49163627624512, 37.832564787218985],
[-122.49223709106445, 37.83337825839438],
[-122.49378204345702, 37.83368330777276]
]
}
}
},
"layout": {
"line-join": "round",
"line-cap": "round"
},
"paint": {
"line-color": "#888",
"line-width": 8
}
});
});
</script> -->
    </body>
</html>	

<!-- Google API Key -->
<!-- AIzaSyAh2QWFhHd7cb7LstbQobDJpdKjppIzqqw -->

<!-- Here Maps -->
<!-- pk.eyJ1IjoiYWFyc2hpY2giLCJhIjoiY2sycnYyOW5hMHJsNzNpcWJudnJzYW8xaiJ9.8ABp1hlgXDQB8_PbJdZh3A -->